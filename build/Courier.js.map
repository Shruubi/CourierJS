{"version":3,"sources":["Courier.js"],"names":["Courier","listeners","middleware","key","listener","undefined","push","data","processedData","applyMiddleware","forEach","d","middlewareFunc"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;;;;;;;;IAEqBA,O;AACpB,oBAAc;AAAA;;AACb,OAAKC,SAAL,GAAiB,EAAjB;AACA,OAAKC,UAAL,GAAkB,EAAlB;AACA;;AAED;;;;;;;;4BAIUC,G,EAAKC,Q,EAAU;AACxB,OAAI,KAAKH,SAAL,CAAeE,GAAf,MAAwBE,SAA5B,EAAuC;AACtC,SAAKJ,SAAL,CAAeE,GAAf,IAAsB,EAAtB;AACA;;AAED,QAAKF,SAAL,CAAeE,GAAf,EAAoBG,IAApB,CAAyBF,QAAzB;AACA;;AAED;;;;;;;0BAIQD,G,EAAKI,I,EAAM;AAClB,OAAIN,YAAY,KAAKA,SAAL,CAAeE,GAAf,CAAhB;;AAEA,OAAIF,cAAcI,SAAd,IAA2BJ,cAAc,IAA7C,EACCA,YAAY,EAAZ;;AAED,OAAIO,gBAAgB,KAAKC,eAAL,CAAqBN,GAArB,EAA0BI,IAA1B,CAApB;AACAN,aAAUS,OAAV,CAAkB,UAACN,QAAD,EAAc;AAC/BA,aAASI,aAAT;AACA,IAFD;AAGA;;AAED;;;;;;;2BAISL,G,EAAKD,U,EAAY;AACzB,OAAI,KAAKA,UAAL,CAAgBC,GAAhB,MAAyBE,SAA7B,EAAwC;AACvC,SAAKH,UAAL,CAAgBC,GAAhB,IAAuB,EAAvB;AACA;;AAED,QAAKD,UAAL,CAAgBC,GAAhB,EAAqBG,IAArB,CAA0BJ,UAA1B;AACA;;AAED;;;;;;;;kCAKgBC,G,EAAKI,I,EAAO;AAC3B,OAAII,IAAIJ,IAAR;AACA,OAAIL,aAAa,KAAKA,UAAL,CAAgBC,GAAhB,CAAjB;;AAEA,OAAID,eAAeG,SAAf,IAA4BH,eAAe,IAA/C,EACCA,aAAa,EAAb;;AAEDA,cAAWQ,OAAX,CAAmB,UAACE,cAAD,EAAoB;AACtCD,QAAIC,eAAeD,CAAf,CAAJ;AACA,IAFD;;AAIA,UAAOA,CAAP;AACA;;AAED;;;;;;wBAGMR,G,EAAK;AACV,QAAKF,SAAL,CAAeE,GAAf,IAAsB,EAAtB;AACA;;;;;;kBAtEmBH,O","file":"Courier.js","sourcesContent":["/*\n * Copyright (c) 2016 Damon Swayn\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included\n * in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n\n\"use strict\";\n\nexport default class Courier {\n\tconstructor() {\n\t\tthis.listeners = {};\n\t\tthis.middleware = {};\n\t}\n\n\t/**\n\t * @param {string} key\n\t * @param {function} listener\n\t */\n\tsubscribe(key, listener) {\n\t\tif (this.listeners[key] === undefined) {\n\t\t\tthis.listeners[key] = [];\n\t\t}\n\n\t\tthis.listeners[key].push(listener);\n\t}\n\n\t/**\n\t * @param {string} key\n\t * @param {object} data\n\t */\n\tpublish(key, data) {\n\t\tlet listeners = this.listeners[key];\n\n\t\tif (listeners === undefined || listeners === null)\n\t\t\tlisteners = [];\n\n\t\tlet processedData = this.applyMiddleware(key, data);\n\t\tlisteners.forEach((listener) => {\n\t\t\tlistener(processedData);\n\t\t});\n\t}\n\n\t/**\n\t * @param {string} key\n\t * @param {function} middleware\n\t */\n\tregister(key, middleware) {\n\t\tif (this.middleware[key] === undefined) {\n\t\t\tthis.middleware[key] = [];\n\t\t}\n\n\t\tthis.middleware[key].push(middleware);\n\t}\n\n\t/**\n\t * @param {string} key\n\t * @param {object} data\n\t * @returns {*}\n\t */\n\tapplyMiddleware(key, data)  {\n\t\tlet d = data;\n\t\tlet middleware = this.middleware[key];\n\n\t\tif (middleware === undefined || middleware === null)\n\t\t\tmiddleware = [];\n\n\t\tmiddleware.forEach((middlewareFunc) => {\n\t\t\td = middlewareFunc(d);\n\t\t});\n\n\t\treturn d;\n\t}\n\n\t/**\n\t * @param {string} key\n\t */\n\tclear(key) {\n\t\tthis.listeners[key] = [];\n\t}\n}\n"]}